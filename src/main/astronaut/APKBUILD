# Maintainer: Elaina Thompson <felinae@ulthar.cat>
pkgname=astronaut
pkgver=0_git20211220
_commit=762f8a694bcb2af1c4fca0a67ea4a52e8ba7b159
pkgrel=0
pkgdesc="A Gemini browser for the terminal."
url="https://sr.ht/~adnano/astronaut/"
license="GPL-3"
arch="all"
makedepends="go scdoc"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://git.sr.ht/~adnano/astronaut/archive/$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"
options="chmod-clean net"

export GOCACHE="$srcdir"
export GOPATH="$srcdir"
export GOTMPDIR="$srcdir"

build() {
	./configure --prefix="$pkgdir/usr"
	make
	gzip "$pkgname.1"
}

check() {
	go test .
}

package() {
	make install
}

sha512sums="
6561e6b87d7527bdd6bc37ad9e70de76444068a12c6f177a3533eaa51a58ec86cd8ba21af98236c4798a4b9db10c14fde3f86fb5ab15bc5cc176fb1d5c20eda5  astronaut-0_git20220102.tar.gz
"
